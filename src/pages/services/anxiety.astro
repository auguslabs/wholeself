---
/**
 * Anxiety Therapy Page
 */

import BaseLayout from '@/layouts/BaseLayout.astro';
import { getPageContent, getLocalizedText } from '@/data/services/contentService';
import { getLocaleFromPathname } from '@/utils/i18n';
import ConditionNavigation from '@/components/services/ConditionNavigation';
import ServicesCTA from '@/components/services/ServicesCTA';
import ConditionIcon from '@/components/services/ConditionIcon';
import ConditionBreadcrumb from '@/components/services/ConditionBreadcrumb';
import type { LocalizedText } from '@/data/models/ContentPage';

interface Condition {
  id: string;
  name: LocalizedText;
  description: LocalizedText;
  icon: string;
  link: string;
}

const lang = getLocaleFromPathname(Astro.url.pathname);
const servicesData = await getPageContent('services', lang);
const conditions = servicesData.content.conditionsSection?.conditions ?? [];
const currentCondition = conditions.find((c: Condition) => c.id === 'anxiety');
if (!currentCondition) return Astro.redirect(lang === 'es' ? '/es/services' : '/services');
const ctaSection = servicesData.content.ctaSection;
const pageTitle = `${getLocalizedText(currentCondition.name, lang)} - WholeSelf Counseling`;
---

<BaseLayout title={pageTitle}>
  <!-- Hero Section -->
  <section class="relative flex items-center justify-center min-h-[25vh] py-8 bg-blueGreen-300">
    <div class="container mx-auto max-w-4xl px-4 text-center">
      <div class="mb-3 inline-flex items-center justify-center w-12 h-12 rounded-full bg-white border-2 border-blueGreen-500">
        <div class="text-blueGreen-500">
          <ConditionIcon client:load iconName={getLocalizedText(currentCondition.icon, lang)} className="w-6 h-6" />
        </div>
      </div>
      <h1 class="text-2xl md:text-3xl font-bold text-white mb-2">
        {getLocalizedText(currentCondition.name, lang)}
      </h1>
      <p class="text-base text-white/90 max-w-2xl mx-auto">
        {getLocalizedText(currentCondition.description, lang)}
      </p>
    </div>
  </section>

  <!-- Breadcrumb Navigation -->
  <ConditionBreadcrumb
    client:load
    conditionName={currentCondition.name}
    language={lang}
  />

  <!-- Main Content -->
  <section class="py-12 px-4 bg-white">
    <div class="container mx-auto max-w-4xl">
      <!-- Introduction -->
      <div class="prose prose-lg max-w-none mb-12">
        <h2 class="text-2xl font-bold text-navy-900 mb-4">
          {lang === 'en' ? 'Understanding Anxiety' : 'Entendiendo la Ansiedad'}
        </h2>
        <p class="text-gray-700 leading-relaxed mb-4">
          {lang === 'en' 
            ? 'Anxiety is a natural response to stress, but when it becomes overwhelming or persistent, it can significantly impact your daily life. At WholeSelf Counseling, we provide compassionate, evidence-based support to help you manage anxiety, panic, and worry.'
            : 'La ansiedad es una respuesta natural al estrés, pero cuando se vuelve abrumadora o persistente, puede impactar significativamente tu vida diaria. En WholeSelf Counseling, brindamos apoyo compasivo basado en evidencia para ayudarte a manejar la ansiedad, el pánico y la preocupación.'}
        </p>
        <p class="text-gray-700 leading-relaxed">
          {lang === 'en'
            ? 'Our approach focuses on understanding your unique experience with anxiety and developing personalized strategies that work for you. We combine therapeutic techniques with practical tools to help you build resilience and regain control.'
            : 'Nuestro enfoque se centra en entender tu experiencia única con la ansiedad y desarrollar estrategias personalizadas que funcionen para ti. Combinamos técnicas terapéuticas con herramientas prácticas para ayudarte a construir resiliencia y recuperar el control.'}
        </p>
      </div>

      <!-- Navigation between conditions -->
      <ConditionNavigation
        client:load
        conditions={conditions}
        currentConditionId="anxiety"
        language={lang}
      />

      <!-- CTA Section -->
      <ServicesCTA
        client:load
        title={ctaSection.title}
        subtitle={ctaSection.subtitle}
        primaryCTAs={ctaSection.primaryCTAs}
        secondaryCTA={ctaSection.secondaryCTA}
        language={lang}
      />
    </div>
  </section>
</BaseLayout>
