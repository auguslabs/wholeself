---
/**
 * I Need Help Form Page - WholeSelf Counseling
 * 
 * Form for individuals seeking help for themselves.
 */

import BaseLayout from '@/layouts/BaseLayout.astro';
import Breadcrumb from '@/components/common/Breadcrumb';
import { getLocaleFromPath, withLocalePath } from '@/utils/i18n';

const lang = getLocaleFromPath(Astro.url.pathname);
const copy = {
  en: {
    title: 'I need help',
    intro:
      "Taking the first step toward support can feel overwhelming, and that's completely okay. " +
      "Our team is here to welcome you with patience, respect, and care. Share what you feel " +
      "comfortable with, and we'll guide you through the next steps at a pace that feels right for you.",
    labels: {
      name: 'Name',
      contactMethod: 'Preferred Contact Method',
      phone: 'Phone Number',
      email: 'Email Address',
      bestTime: 'Best Time to Contact',
      message: 'Brief Message',
      messageNote: "(optional - it's okay to keep it brief)",
      insurance: 'Insurance Information',
      insuranceNote: '(if applicable)',
      preferredTherapist: 'Preferred Therapist',
      preferredTherapistNote: '(if any)',
      hearAbout: 'How Did You Hear About Us?',
      hearAboutNote: '(optional)',
    },
    placeholders: {
      name: 'Your full name',
      phone: '(505) 555-0123',
      email: 'your.email@example.com',
      message: 'Share what you feel comfortable with...',
      insurance: 'Insurance provider name',
      preferredTherapist: 'Therapist name (optional)',
    },
    options: {
      select: 'Please select...',
      phone: 'Phone',
      email: 'Email',
      text: 'Text Message',
      morning: 'Morning (8am - 12pm)',
      afternoon: 'Afternoon (12pm - 5pm)',
      evening: 'Evening (5pm - 8pm)',
      flexible: 'Flexible / Any time',
      search: 'Online Search',
      referral: 'Referral from friend/family',
      provider: 'Referral from healthcare provider',
      social: 'Social Media',
      other: 'Other',
    },
    submit: 'Submit Request',
    note: "We'll respond to your request within 24-48 hours.",
    breadcrumb: {
      contact: 'Contact',
      back: 'Back to Contact',
    },
  },
  es: {
    title: 'Necesito ayuda',
    intro:
      'Dar el primer paso para buscar apoyo puede sentirse abrumador, y eso está bien. ' +
      'Nuestro equipo está aquí para recibirte con paciencia, respeto y cuidado. Comparte lo que ' +
      'te resulte cómodo, y te guiaremos en los próximos pasos a un ritmo que se sienta bien para ti.',
    labels: {
      name: 'Nombre',
      contactMethod: 'Método de contacto preferido',
      phone: 'Número de teléfono',
      email: 'Correo electrónico',
      bestTime: 'Mejor horario para contactar',
      message: 'Mensaje breve',
      messageNote: '(opcional - puedes mantenerlo breve)',
      insurance: 'Información del seguro',
      insuranceNote: '(si aplica)',
      preferredTherapist: 'Terapeuta preferido',
      preferredTherapistNote: '(si aplica)',
      hearAbout: '¿Cómo supiste de nosotros?',
      hearAboutNote: '(opcional)',
    },
    placeholders: {
      name: 'Tu nombre completo',
      phone: '(505) 555-0123',
      email: 'tu.correo@ejemplo.com',
      message: 'Comparte lo que te resulte cómodo...',
      insurance: 'Nombre del proveedor de seguro',
      preferredTherapist: 'Nombre del terapeuta (opcional)',
    },
    options: {
      select: 'Selecciona una opción...',
      phone: 'Teléfono',
      email: 'Correo',
      text: 'Mensaje de texto',
      morning: 'Mañana (8am - 12pm)',
      afternoon: 'Tarde (12pm - 5pm)',
      evening: 'Noche (5pm - 8pm)',
      flexible: 'Flexible / Cualquier horario',
      search: 'Búsqueda en internet',
      referral: 'Recomendación de familia/amigos',
      provider: 'Referido por profesional de salud',
      social: 'Redes sociales',
      other: 'Otro',
    },
    submit: 'Enviar solicitud',
    note: 'Responderemos tu solicitud en 24-48 horas.',
    breadcrumb: {
      contact: 'Contacto',
      back: 'Volver a Contacto',
    },
  },
};
const t = copy[lang];
---

<BaseLayout title={`${t.title} - WholeSelf Counseling`}>
  <!-- Breadcrumb Navigation -->
  <Breadcrumb
    client:load
    items={[
      { label: t.breadcrumb.contact, href: withLocalePath('/contact', lang) },
      { label: t.title }
    ]}
    language={lang}
    backHref={withLocalePath('/contact', lang)}
    backText={t.breadcrumb.back}
  />

  <section class="py-16 px-4 bg-gray-50 min-h-screen">
    <div class="container mx-auto max-w-3xl">
      <!-- Header -->
      <div class="text-center mb-12">
        <h1 class="text-4xl font-bold text-navy-800 mb-4">
          {t.title}
        </h1>
        <p class="text-lg text-gray-700 max-w-2xl mx-auto">
          {t.intro}
        </p>
      </div>

      <!-- Form -->
      <div class="bg-white rounded-lg shadow-md p-8">
        <form class="space-y-6" method="POST" action="/api/contact">
          <!-- Name -->
          <div>
            <label for="name" class="block text-sm font-medium text-gray-700 mb-2">
              {t.labels.name} <span class="text-red-500">*</span>
            </label>
            <input
              type="text"
              id="name"
              name="name"
              required
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
              placeholder={t.placeholders.name}
            />
          </div>

          <!-- Preferred Contact Method -->
          <div>
            <label for="contact-method" class="block text-sm font-medium text-gray-700 mb-2">
              {t.labels.contactMethod} <span class="text-red-500">*</span>
            </label>
            <select
              id="contact-method"
              name="contactMethod"
              required
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
            >
              <option value="">{t.options.select}</option>
              <option value="phone">{t.options.phone}</option>
              <option value="email">{t.options.email}</option>
              <option value="text">{t.options.text}</option>
            </select>
          </div>

          <!-- Phone Number -->
          <div>
            <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">
              {t.labels.phone}
            </label>
            <input
              type="tel"
              id="phone"
              name="phone"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
              placeholder={t.placeholders.phone}
            />
          </div>

          <!-- Email -->
          <div>
            <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
              {t.labels.email}
            </label>
            <input
              type="email"
              id="email"
              name="email"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
              placeholder={t.placeholders.email}
            />
          </div>

          <!-- Best Time to Contact -->
          <div>
            <label for="best-time" class="block text-sm font-medium text-gray-700 mb-2">
              {t.labels.bestTime}
            </label>
            <select
              id="best-time"
              name="bestTime"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
            >
              <option value="">{t.options.select}</option>
              <option value="morning">{t.options.morning}</option>
              <option value="afternoon">{t.options.afternoon}</option>
              <option value="evening">{t.options.evening}</option>
              <option value="flexible">{t.options.flexible}</option>
            </select>
          </div>

          <!-- Brief Message -->
          <div>
            <label for="message" class="block text-sm font-medium text-gray-700 mb-2">
              {t.labels.message}{' '}
              <span class="text-gray-500 text-sm font-normal">{t.labels.messageNote}</span>
            </label>
            <textarea
              id="message"
              name="message"
              rows="4"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
              placeholder={t.placeholders.message}
            ></textarea>
          </div>

          <!-- Insurance Information -->
          <div>
            <label for="insurance" class="block text-sm font-medium text-gray-700 mb-2">
              {t.labels.insurance}{' '}
              <span class="text-gray-500 text-sm font-normal">{t.labels.insuranceNote}</span>
            </label>
            <input
              type="text"
              id="insurance"
              name="insurance"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
              placeholder={t.placeholders.insurance}
            />
          </div>

          <!-- Preferred Therapist -->
          <div>
            <label for="preferred-therapist" class="block text-sm font-medium text-gray-700 mb-2">
              {t.labels.preferredTherapist}{' '}
              <span class="text-gray-500 text-sm font-normal">{t.labels.preferredTherapistNote}</span>
            </label>
            <input
              type="text"
              id="preferred-therapist"
              name="preferredTherapist"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
              placeholder={t.placeholders.preferredTherapist}
            />
          </div>

          <!-- How Did You Hear About Us -->
          <div>
            <label for="hear-about" class="block text-sm font-medium text-gray-700 mb-2">
              {t.labels.hearAbout}{' '}
              <span class="text-gray-500 text-sm font-normal">{t.labels.hearAboutNote}</span>
            </label>
            <select
              id="hear-about"
              name="hearAbout"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
            >
              <option value="">{t.options.select}</option>
              <option value="search">{t.options.search}</option>
              <option value="referral">{t.options.referral}</option>
              <option value="provider">{t.options.provider}</option>
              <option value="social-media">{t.options.social}</option>
              <option value="other">{t.options.other}</option>
            </select>
          </div>

          <!-- Submit Button -->
          <div class="pt-4">
            <button
              type="submit"
              class="w-full bg-primary-600 text-white font-medium py-3 px-6 rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors"
            >
              {t.submit}
            </button>
          </div>

          <p class="text-sm text-gray-600 text-center mt-4">
            {t.note}
          </p>
        </form>
      </div>
    </div>
  </section>
</BaseLayout>

